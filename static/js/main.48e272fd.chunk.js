(this["webpackJsonpgoit-react-hw-03-image-finder"]=this["webpackJsonpgoit-react-hw-03-image-finder"]||[]).push([[0],{11:function(t,e,a){t.exports={overlay:"Modal_overlay__qTC1i",modal:"Modal_modal__2e6ty"}},14:function(t,e,a){t.exports={item:"ImageGalleryItem_item__17qtn",image:"ImageGalleryItem_image__3inZZ"}},15:function(t,e,a){t.exports={btnContainer:"Button_btnContainer__XCiFX",loadmorebtn:"Button_loadmorebtn__1X0xu"}},27:function(t,e,a){t.exports={loaderContainer:"Loader_loaderContainer__129Vs"}},30:function(t,e,a){t.exports={list:"ImageGallery_list__2y_in"}},31:function(t,e,a){t.exports={App:"App_App__3Ckl0"}},37:function(t,e,a){},79:function(t,e,a){"use strict";a.r(e);var n=a(0),o=a.n(n),r=a(10),s=a.n(r),c=(a(36),a(37),a(16)),i=a(4),l=a(5),u=a(7),h=a(6),g=a(26),d=a.n(g),m=(a(58),a(27)),p=a.n(m),b=a(1),f=function(){return Object(b.jsx)("div",{className:p.a.loaderContainer,children:Object(b.jsx)(d.a,{type:"ThreeDots",color:"#00BFFF",height:100,width:100,timeout:3e3})})},j=a(9),y=a(13),v=a.n(y),_=a(28),O=a(29),x=a.n(O),w=function(){var t=Object(_.a)(v.a.mark((function t(e,a){var n;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,x.a.get("".concat("https://pixabay.com/api","/?image_type=photo&orientation=horizontal&q=").concat(e,"&page=").concat(a,"&per_page=8&key=").concat("19125225-7dee0ee7ebb4766682ccd7b12"));case 2:return n=t.sent,t.abrupt("return",n.data);case 4:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}(),S=(a(25),a(8)),C=a.n(S),k=function(t){Object(u.a)(a,t);var e=Object(h.a)(a);function a(){var t;Object(i.a)(this,a);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(t=e.call.apply(e,[this].concat(o))).state={searchQuery:""},t.handleInputChange=function(e){t.setState({searchQuery:e.currentTarget.value.toLowerCase()})},t.handleSubmit=function(e){e.preventDefault(),""!==t.state.searchQuery.trim()?(t.props.onSubmit(t.state.searchQuery),t.setState({searchQuery:""})):j.b.error("Please add search query")},t}return Object(l.a)(a,[{key:"render",value:function(){var t=this.state.searchQuery;return Object(b.jsx)("header",{className:C.a.header,children:Object(b.jsxs)("form",{className:C.a.form,onSubmit:this.handleSubmit,children:[Object(b.jsx)("button",{type:"submit",className:C.a.searchbutton,children:Object(b.jsx)("span",{className:C.a.label,children:"Search"})}),Object(b.jsx)("input",{className:C.a.input,type:"text",autoComplete:"off",autoFocus:!0,placeholder:"Search images and photos",value:t,onChange:this.handleInputChange})]})})}}]),a}(n.Component),I=a(14),M=a.n(I),N=function(t){var e=t.image,a=t.toggleModal;return Object(b.jsx)("li",{className:M.a.item,children:Object(b.jsx)("img",{src:e.webformatURL,alt:e.tags,className:M.a.image,onClick:function(){a({status:!0,src:e.largeImageURL,alt:e.tags})}})})},B=a(30),L=a.n(B),F=function(t){var e=t.images,a=t.toggleModal;return Object(b.jsx)("ul",{className:L.a.list,children:e.map((function(t){return Object(b.jsx)(N,{image:t,toggleModal:a},t.id)}))})},Q=a(11),D=a.n(Q),T=function(t){Object(u.a)(a,t);var e=Object(h.a)(a);function a(){var t;Object(i.a)(this,a);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(t=e.call.apply(e,[this].concat(o))).handleKeyDown=function(e){"Escape"===e.code&&t.props.toggleModal({status:!1})},t.handleBackdropClick=function(e){e.target===e.currentTarget&&t.props.toggleModal({status:!1})},t}return Object(l.a)(a,[{key:"componentDidMount",value:function(){window.addEventListener("keydown",this.handleKeyDown)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("keydown",this.handleKeyDown)}},{key:"render",value:function(){var t=this.props,e=t.src,a=t.alt;return Object(b.jsx)("div",{className:D.a.overlay,onClick:this.handleBackdropClick,children:Object(b.jsx)("div",{className:D.a.modal,children:Object(b.jsx)("img",{className:D.a.img,src:e,alt:a})})})}}]),a}(n.Component),P=a(15),A=a.n(P),E=function(t){var e=t.onClick;return Object(b.jsx)("div",{className:A.a.btnContainer,children:Object(b.jsx)("button",{type:"button",className:A.a.loadmorebtn,onClick:e,children:"Load More"})})},H=a(31),q=a.n(H),U=function(t){Object(u.a)(a,t);var e=Object(h.a)(a);function a(){var t;Object(i.a)(this,a);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(t=e.call.apply(e,[this].concat(o))).state={searchQuery:"",images:[],totalHits:0,largeImageURL:"",page:1,error:null,isLoading:!1,showModal:!1,showButton:!1,message:"",targetImage:null},t.onSubmit=function(e){t.setState({searchQuery:e})},t.onIncrementPage=function(){t.setState((function(t){return{page:t.page+1}}))},t.onScrollPage=function(){setTimeout((function(){window.scrollTo({top:document.documentElement.clientHeight,behavior:"smooth"})}),1200)},t.onCheckButton=function(){var e=t.state,a=e.totalHits;a>e.images.length?t.setState({showButton:!0}):t.setState({showButton:!1}),a||j.b.error("No result:( try smth else")},t.toggleModal=function(e){var a=e.status,n=e.src,o=e.alt;a?t.setState({targetImage:{src:n,alt:o},showModal:!0}):t.setState({targetImage:null,showModal:!1})},t}return Object(l.a)(a,[{key:"componentDidMount",value:function(){this.searchImages()}},{key:"componentDidUpdate",value:function(t,e){var a=this.state,n=a.searchQuery,o=a.page;e.searchQuery!==n&&(this.searchImages(n,1),this.setState({page:1})),e.page!==o&&this.searchImages(n,o)}},{key:"searchImages",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;""!==e?(this.setState({isLoading:!0}),w(e,a).then((function(e){1===a?t.setState({totalHits:e.totalHits,images:e.hits}):(t.setState((function(t){return{images:[].concat(Object(c.a)(t.images),Object(c.a)(e.hits))}})),t.onScrollPage()),t.onCheckButton()})).catch((function(e){return t.setState({error:"Smth went wrong:( please try again"})})).finally((function(){return t.setState({isLoading:!1})}))):this.setState({images:[],showButton:!1})}},{key:"render",value:function(){var t=this.state,e=t.images,a=t.isLoading,n=t.showModal,o=t.targetImage,r=t.showButton;return Object(b.jsxs)("div",{className:q.a.app,children:[Object(b.jsx)(k,{onSubmit:this.onSubmit}),a&&Object(b.jsx)(f,{}),e.length>0&&Object(b.jsx)(F,{images:e,toggleModal:this.toggleModal}),n&&Object(b.jsx)(T,{src:o.src,alt:o.alt,toggleModal:this.toggleModal}),r&&Object(b.jsx)(E,{onClick:this.onIncrementPage}),Object(b.jsx)(j.a,{autoClose:3e3})]})}}]),a}(n.Component),G=function(t){t&&t instanceof Function&&a.e(3).then(a.bind(null,80)).then((function(e){var a=e.getCLS,n=e.getFID,o=e.getFCP,r=e.getLCP,s=e.getTTFB;a(t),n(t),o(t),r(t),s(t)}))};s.a.render(Object(b.jsx)(o.a.StrictMode,{children:Object(b.jsx)(U,{})}),document.getElementById("root")),G()},8:function(t,e,a){t.exports={header:"Searchbar_header__1qhOH",form:"Searchbar_form__1Ecrc",searchbutton:"Searchbar_searchbutton__2pOfN",label:"Searchbar_label__399Rg",input:"Searchbar_input__1k9GF"}}},[[79,1,2]]]);
//# sourceMappingURL=main.48e272fd.chunk.js.map